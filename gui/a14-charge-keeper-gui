#!/bin/bash

# A14 Charge Keeper GUI - Simple wrapper with privilege escalation

GUI_SCRIPT="/usr/local/share/a14-charge-keeper/gui/main.py"

# Check if GUI script exists
if [ ! -f "$GUI_SCRIPT" ]; then
    # Try development location
    GUI_SCRIPT="/home/sang/Developments/tuf-charge-keeper/gui/main.py"
    if [ ! -f "$GUI_SCRIPT" ]; then
        echo "Error: Could not find GUI main.py" >&2
        exit 1
    fi
fi

# Use pkexec with DISPLAY and XAUTHORITY environment variables preserved
exec pkexec env DISPLAY="$DISPLAY" XAUTHORITY="$XAUTHORITY" python3 "$GUI_SCRIPT" "$@"